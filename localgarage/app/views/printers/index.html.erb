  <div class="printer_list_wrapper margin_top_70">
      <div class="printer_list_left">
          google maps
      </div>
      <div class="printer_list_right">
          <h1>Listing printers</h1>


  <div style='width: 800px;'>
      <div id="map" style='width: 800px; height: 400px;'></div>
  </div>

  <script type="text/javascript">
      handler = Gmaps.build('Google');
      handler.buildMap({ provider: {},  internal: {id: 'map'}},  function(){
          markers = handler.addMarkers(<%=raw @hash.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
      });
  </script>


  <table>

          <div class="filter_wrapper">
              <div class="search_by_keyword filter_column">
              <%= form_tag printers_path,  :method => 'get' do %>
              <span>素材を検索する</span>
              <%= text_field_tag :search, params[:search], :class=>'input_text' %>
              <%= submit_tag "Search", :material => nil, :class=>'search_btn' %>
              <% end %>
          </div>


          <div class="search_printer_checkbox_wrapper filter_column">
              <div>condition</div>
              <div class="checkbox" id="checkbox1">
                  <label><%=check_box_tag :true, "true" %>利用可能</lable>
              </div>
              <div class="checkbox" id="checkbox2">
                  <label><%=check_box_tag :false, "false" %>利用不可</lable>
              </div>
          </div>

          <table>

              <tbody>
                  <%= content_tag_for :tr, @printers do |printer| %>
                      <% if printer.user_id %>
                          <% if @hoge == 'false' %>
                              <td><%= printer.machinemodel %></td>
                              <td><%= printer.resolution %></td>
                              <td><%= printer.location %></td>
                              <td><%= printer.condition %></td>
                              <td><%= image_tag image_printer_path(printer) %></td>
                              <td><%= link_to 'Print!!', printer %></td>
                              <% if current_user %>
                                  <% if printer.user_id == current_user.id %>
                                      <td><%= link_to 'Edit',  edit_printer_path(printer) %></td>
                                      <td><%= link_to 'Delete',  printer,  method: :delete,  data: { confirm: 'Are you sure?' } %></td>
                                  <% end %>
                              <% end %>
                          <% else %>
                              <% if printer.condition %>
                                  <td><%= printer.machinemodel %></td>
                                  <td><%= printer.resolution %></td>
                                  <td><%= printer.location %></td>
                                  <td><%= printer.condition %></td>
                                  <td><%= image_tag image_printer_path(printer) %></td>
                                  <td><%= link_to 'Print!!', printer %></td>
                                  <% if current_user %>
                                      <% if printer.user_id == current_user.id %>
                                          <td><%= link_to 'Edit',  edit_printer_path(printer) %></td>
                                          <td><%= link_to 'Delete',  printer,  method: :delete,  data: { confirm: 'Are you sure?' } %></td>
                                      <% end %>
                                  <% end %>
                              <% end %>
                          <% end %>
                      <% end %>
                  <% end %>
              </tbody>
          </table>
          <div>
              <%= link_to 'New Printer', new_printer_path %>
          </div>
      </div>
  </div>


  <script type="text/javascript">
      $(document).ready(function(){
          getParam();
      });

      function getParam() {
          var url   = location.href;
          if(url.indexOf("?") != -1){
            parameters    = url.split("?");
            params   = parameters[1].split("&");
            var paramsArray = [];
            for ( i = 0; i < params.length; i++ ) {
                neet = params[i].split("=");
                paramsArray.push(neet[0]);
                paramsArray[neet[0]] = neet[1];
            }
            var categoryKey = paramsArray["search"];
            if(categoryKey == "true"){
              document.getElementById('checkbox1').innerHTML = '<label><%=check_box_tag :true, "true", true%>利用可能</lable>';
            }
            if(categoryKey == "false"){
              document.getElementById('checkbox2').innerHTML = '<label><%=check_box_tag :false, "false", true%>利用不可</lable>';
            }
          }else{
            document.getElementById('checkbox1').innerHTML = '<label><%=check_box_tag :true, "true", false%>利用可能</lable>';
            document.getElementById('checkbox2').innerHTML = '<label><%=check_box_tag :false, "false", false%>利用不可</lable>';
          }
      }

      $(function(){
          $("#checkbox1 :checkbox").click(function(){
            if($("#checkbox1 :checked").length > 0){
              location.href='http://localhost:3000/printers?utf8=%E2%9C%93&search=abs&commit=Search';
            }else{
              location.href='http://localhost:3000/printers';
            }
          });
      });

      $(function(){
          $("#checkbox2 :checkbox").click(function(){
            if($("#checkbox2 :checked").length > 0){
              location.href='http://localhost:3000/printers?utf8=%E2%9C%93&search=false&commit=Search';
            }else{
              location.href='http://localhost:3000/printers';
            }
          });
      });

  </script>